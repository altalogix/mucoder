/*! HelpSmith Web Help System 2.0
* http://www.helpsmith.com
* Copyright (c) 2007-2013 Divcom Software */
var treeImagesPath="css/navi-page/tree-images/",searchIndexLoaded=searchIndexLoading=!1,sortBy="rank",selKeywordNode=null,currentTopicContext=-1; $(document).ready(function(){sortBy=$.cookie("hswh-ssd");sortBy="title"!=sortBy&&"rank"!=sortBy?"rank":sortBy;$("#tabs").tabs({activate:function(){updateCurrentTab()}});var a=getWHSettings("tocAtimateExpandingCollapsingDuration",0),a=0>=a?null:{height:"toggle",duration:a};$("#toc-tree").dynatree({debugLevel:0,imagePath:treeImagesPath,fx:a,autoCollapse:getWHSettings("tocOnlyExpandSingleHeading",!1),onActivate:function(a){a.data.href&&"#"!=a.data.href&&open(a.data.href,a.data.target);0<a.countChildren()&& getWHSettings("tocAutoExpandOnActivate",!1)&&a.expand(!0)},onDblClick:function(a,c){if("title"==a.getEventTargetType(c))return a.toggleExpand(),!1}});$.ui.dynatree.nodedatadefaults.icon=!1;a=$("#index-tree").dynatree({debugLevel:0,imagePath:treeImagesPath,onQueryExpand:function(a){if(!a)return!1},onActivate:function(a){keywordNodeActivated(a)},onClick:function(){this.reactivate()},onRender:function(a,c){var e=$(c);e.find("span.dynatree-expander").remove();e.find("span.dynatree-connector").remove()}}); 0<a.length&&(a.dynatree("getRoot").visit(function(a){a.expand(!0)}),a.scroll(function(){destroyPopupBox()}));$("#search-form").bind("submit",function(){search();return!1});$("input#kwd-search").bind("keyup",selectKeyword);$(window).resize(function(){alignTabPanel();alignTocTree();alignSearchBoxFields();alignSearchResultTree();alignSearchKwdField();alignIndexTree();updatePopupBoxWidth()});updateCurrentTab()}); function alignTabPanel(){$("#tabs .ui-tabs-panel:visible").css("height",$(window).height()-$("#tabs .ui-tabs-nav").outerHeight(!0))}function alignTocTree(){$("#toc-tree:visible").css("height",$(window).height()-$("#tabs .ui-tabs-nav").outerHeight(!0))}function alignSearchResultTree(){var a=$("#sort-result-header:visible");0!=a.length&&$("#search-result-tree:visible").css("height",$(window).height()-(a.position().top+a.outerHeight(!0)))} function alignSearchBoxFields(){var a=$("#search-box:visible");if(0!=a.length){var b=a.find("#squery"),c=a.find("#search-button");b.css("width",a.width()-c.outerWidth(!0)-(b.outerWidth(!0)-b.width()));c.css({top:b.position().top+b.outerHeight(!0)/2-c.outerHeight(!0)/2,left:b.outerWidth(!0)+(c.outerWidth(!0)-c.outerWidth())})}}function alignSearchKwdField(){var a=$("#kwd-search-box:visible");if(0!=a.length){var b=a.find("#kwd-search");b.css("width",a.width()-(b.outerWidth(!0)-b.width()))}} function alignIndexTree(){var a=$("#kwd-search-box:visible");0!=a.length&&$("#index-tree:visible").css("height",$(window).height()-(a.position().top+a.outerHeight(!0)))} function updateCurrentTab(){alignTabPanel();switch(getSelectedTab()){case "tab-toc":alignTocTree();0<=currentTopicContext&&activateTocNode(currentTopicContext);destroyPopupBox();break;case "tab-index":alignSearchKwdField();alignIndexTree();$("input#kwd-search").focus();break;case "tab-search":searchIndexLoaded=searchIndexLoaded||0<$('head script[src*="search-index.js"]').length,alignSearchBoxFields(),alignSearchResultTree(),$("input#squery").focus(),destroyPopupBox()}} function getTextLabel(a,b,c){a=$("input[type=hidden][name="+a+"]").val();"undefined"===typeof a&&(a=b);"undefined"!==typeof c&&(a=a.replace("%s",c));return a}function showSEMessage(a){var b=$("<div></div>").attr("id","sort-result-header");$("<span></span>").addClass("se-message").append(a).appendTo(b);$("#search-result").empty().append(b)} function showResultBar(a){var b=$("<table></table>"),c=$("<tr></tr>").appendTo(b),e=$("<td></td>").appendTo(c);$("<span></span>").addClass("se-message").appendTo(e).append(a);a=$("<td></td>").appendTo(c);var c=$("<span></span>").addClass("caret"),e=$("<span></span>").addClass("text-label").append(getTextLabel("sort-control-title","Sort by")),d=$("<div></div>").attr("id","sort-control");$("<div></div>").addClass("menu-activator").append(e).append(c).appendTo(d).click(function(){d.find("#sorting-popup-menu").is(":visible")? hideSortingPopupMenu():showSortingPopupMenu(d)});d.appendTo(a).append(createSortingPopupMenu()).hover(function(){showSortingPopupMenu($(this))},function(){hideSortingPopupMenu()});b=$("<div></div>").attr("id","sort-result-header").append(b);$("#search-result").empty().append(b)} function createSortingPopupMenu(){function a(a,b,d,h){$("<li/>").attr("id",b).addClass("menu-item").append("<span>"+d+"</span>").appendTo(a).click(h).hover(function(){a.stop(!0,!0);$(this).addClass("menu-item-hover")},function(){a.stop(!0,!0);$(this).removeClass("menu-item-hover")})}var b=$("<ul></ul>").attr("id","sorting-popup-menu");a(b,"sort-by-rank",getTextLabel("sort-menu-item-rank","Most relevant"),function(){hideSortingPopupMenu();sortSearchResult(sortBy="rank")});a(b,"sort-by-title",getTextLabel("sort-menu-item-title", "Topic title"),function(){hideSortingPopupMenu();sortSearchResult(sortBy="title")});b.find("li:last-child").addClass("last-child");return b} function showSortingPopupMenu(a){switch(sortBy){case "title":a.find("#sort-by-title").addClass("menu-item-checked");a.find("#sort-by-rank").removeClass("menu-item-checked");break;case "rank":a.find("#sort-by-title").removeClass("menu-item-checked"),a.find("#sort-by-rank").addClass("menu-item-checked")}a.find("span.caret").addClass("caret-hover");var b=$("#sorting-popup-menu"),c=a.position(),e=c.top+a.outerHeight();e+b.outerHeight(!0)>$(window).height()&&(e=c.top-b.outerHeight(!0));b.css({top:e,left:c.left+ a.outerWidth()-b.outerWidth()}).stop(!0,!0).fadeIn("fast")}function hideSortingPopupMenu(){var a=$("#sort-control");a.find("span.caret").removeClass("caret-hover");a.find("#sorting-popup-menu").stop(!0,!0).fadeOut("fast")} function sortSearchResult(a){a="title"==a?function(a,c){return compareStrings(a.data.title,c.data.title)}:function(a,c){return a.data.seRank==c.data.seRank?compareStrings(a.data.title,c.data.title):0==a.data.seRank?-1:0==c.data.seRank?1:c.data.seRank-a.data.seRank};$("#search-result-tree").dynatree("getRoot").sortChildren(a,!0);$.cookie("hswh-ssd",sortBy,{expires:30,path:"/"})} function updateMatchControlState(a){switch(a){case tSearchMatch.EXACT:$("input#anywords").prop("checked",!0);break;case tSearchMatch.PHRASE:$("input#phrase").prop("checked",!0)}}function loadSearchIndex(a){!searchIndexLoaded&&!searchIndexLoading?(searchIndexLoading=!0,$.getScript("js/search-index.js").done(function(){searchIndexLoaded=!0;searchIndexLoading=!1;a(!0)}).fail(function(){searchIndexLoading=!1;a(!1)})):searchIndexLoaded&&a(!0)} function doSearch(){var a=new searchEngine;if(a.search($("input#squery").val(),"phrase"==$('input[type="radio"][name="match"]:checked').val())){for(var b=$("<ul></ul>"),c=0;c<a.resultItems.length;c++){var e=a.resultItems[c],d=$("<li/>").appendTo(b).attr({title:e.getTitle(),data:"seRank : "+e.rank+", topicIndex : "+e.topicIndex+", topicRef : '"+e.getRef("highlight")+"'"});$("<a></a>").attr({href:e.getRef(),target:"topic"}).appendTo(d).append(e.getTitle())}showResultBar(getTextLabel("search-result-topics-found", "%s topic(s) found:",a.resultItems.length));$("<div></div>").attr({id:"search-result-tree"}).appendTo("#search-result");alignSearchResultTree();$("#search-result-tree").append(b);$.ui.dynatree.nodedatadefaults.icon=!1;$("#search-result-tree").dynatree({debugLevel:0,imagePath:treeImagesPath,onActivate:function(a){a.data.topicRef&&open(a.data.topicRef,a.data.target)},onRender:function(a,b){var c=$(b);c.find("span.dynatree-expander").remove();c.find("span.dynatree-connector").remove()},onDeactivate:function(a){a.data.addClass= "visited-topic";a.render()}});sortSearchResult(sortBy)}else showSEMessage(getTextLabel("search-result-no-topics-found","No topics found."));updateMatchControlState(a.searchMatch)}function search(){var a=$("<div></div>").attr("id","search-wait");$("#search-result").empty().append(a);loadSearchIndex(function(a){a?doSearch():showSEMessage("Error: Unable to load search index.")})}function getSelectedTab(){var a=$("#tabs li.ui-tabs-active a").attr("href");""!=a&&(a=a.substring(1));return a} function activateTocNode(a){var b=$("#toc-tree");return 0<b.length&&(a=b.dynatree("getTree").getNodeByKey("wh-context-"+a))?(a.activateSilently(),a.focus(),!0):!1}function setCurrentTopic(a){"tab-toc"==getSelectedTab()&&activateTocNode(a);currentTopicContext=a;0<=currentTopicContext&&(a=$("#search-result-tree"),0<a.length&&(a=a.dynatree("getActiveNode"))&&gTopicTable[a.data.topicIndex][0]!=currentTopicContext&&a.deactivate())} function selectKeyword(a){function b(a){return(a=a.dynatree("getRoot").getChildren())?a[0]:null}function c(){selKeywordNode&&(selKeywordNode.data.addClass="",selKeywordNode.render())}var e=$("#index-tree"),d=$.trim($(this).val()),h=null;if(""!=d){d=d.toLowerCase();for(f=b(e);f;){var g=f.data.title;if(null!==g&&""!=g&&(g=g.toLowerCase(),g.charAt(0)==d.charAt(0))){if(g.substring(0,d.length)==d){h=f;break}if(g>d){a:{for(d=d.substring(0,d.length-1);""!=d;d=d.substring(0,d.length-1))if(g.substring(0,d.length)== d){d=!0;break a}d=!1}d&&(h=f);break}else h=f}f=f.getNextSibling()}}if(f=h){if(f!=selKeywordNode){c();if(selKeywordNode=f)selKeywordNode.data.addClass="highlight",selKeywordNode.render();destroyPopupBox()}}else c(),selKeywordNode=null,destroyPopupBox();h=e.scrollTop();d=0;selKeywordNode&&(f=b(e),f!=selKeywordNode&&(d=$(selKeywordNode.li).position().top+h));e.scrollTop(d);a||(a=window.event);if(13==a.keyCode&&selKeywordNode){a=e.dynatree("getTree");var f=a.getActiveNode();f!=selKeywordNode?selKeywordNode.activate(): a.reactivate()}}function createPopupBox(){var a=$("<div></div>").attr("id","popup-box");$("<span></span>").addClass("close-icon").click(destroyPopupBox).appendTo(a);var b=$("<div></div>").addClass("container").appendTo(a);$("<div></div>").addClass("content").appendTo(b);return a}function destroyPopupBox(){$("#popup-box").stop(!0,!0).hide().remove()} function calcPopupBoxWidth(a,b){"undefined"===typeof b&&(b=a.position().left);var c=$(window).width()-b-(a.outerWidth(!0)-a.width());350<c&&(c=350);return c}function alignPopupBox(a,b){var c=$(a.li).find("a.dynatree-title"),e=c.offset();b.css("width",calcPopupBoxWidth(b,e.left));c=e.top+c.outerHeight(!0)+1;c+b.outerHeight(!0)>$(window).height()&&(c=e.top-b.outerHeight(!0)-1);b.css({top:c,left:e.left})} function updatePopupBoxWidth(a){"undefined"===typeof a&&(a=$("#popup-box"));0<a.length&&a.css("width",calcPopupBoxWidth(a))} function createKwdTopicList(a){for(var b=createPopupBox(),c=b.find("div.content"),c=$("<table></table>").appendTo(c),e=0;e<a.length;e++){var d=gTopicTable[a[e]],h=$("<tr></tr>").appendTo(c),g=$("<td></td>").appendTo(h);$("<span></span>").addClass("topicdoc-icon").appendTo(g);g=$("<td></td>").appendTo(h);$("<a></a>").attr({href:d[3],target:"topic"}).append(d[2]).appendTo(g)}$("#tab-index").append(b);return b} function showKwdTopicList(a){destroyPopupBox();var b=createKwdTopicList(a.data.topics);alignPopupBox(a,b);b.stop(!0,!0).fadeIn("fast")}function createKwdNoEntryWarning(){var a=createPopupBox();a.find("div.content").addClass("message").append(getTextLabel("help-index-no-entry","To locate information about this keyword, please select one of the subentries in the list."));$("#tab-index").append(a);return a} function showKwdNoEntryWarning(a){destroyPopupBox();var b=createKwdNoEntryWarning();alignPopupBox(a,b);b.stop(!0,!0).fadeIn("fast")}function keywordNodeActivated(a){var b=a.data.topics;if(b){if(0==b.length){showKwdNoEntryWarning(a);return}if(1<b.length){showKwdTopicList(a);return}}destroyPopupBox();a.data.href&&"#"!=a.data.href&&open(a.data.href,a.data.target)};